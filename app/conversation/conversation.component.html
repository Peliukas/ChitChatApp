<Page class="page">
    <Page.actionBar>
        <ActionBar class="action-bar" title="Chat with {{userID}}">
            <FlexBoxLayout justifyContent="space-between" alignItems="center" width="280">
                <FlexBoxLayout (tap)="goBack()">
                    <Label class="go-back-btn" backgroundImage="res://back" height="20" width="20"></Label>
                </FlexBoxLayout>
                <Label class="action-bar-title" text="Chat with {{userID}}"></Label>
            </FlexBoxLayout>
        </ActionBar>
    </Page.actionBar>
    <GridLayout rows="*, auto" columns="320">
        <ScrollView row="0" col="0" class="conversation-container" #conversationContainer>
            <StackLayout>
                <StackLayout *ngFor="let message of messages">
                    <Label [class.written-message]="message.userID !== userID"
                           [class.received-message]="message.userID === userID"
                           horizontalAlignment="{{message.userID === userID ? 'right' : 'left'}}"
                           text="{{message.messageBody}}"
                           class="user-message"></Label>
                </StackLayout>
            </StackLayout>
        </ScrollView>
        <GridLayout row="1" col="0" rows="50" columns="280, auto" backgroundColor="#C3C6D3" class="message-input-group">
            <TextField row="0" col="0" class="message-body-input" #messageBodyInput hint="Aa"></TextField>
            <FlexBoxLayout row="0" col="1"
                           (tap)="sendMessage(messageBodyInput.text); messageBodyInput.text = ''; scrollDown()">
                <Label class="send-message-button" backgroundImage="res://send" height="25" width="25"></Label>
            </FlexBoxLayout>
        </GridLayout>
    </GridLayout>
</Page>